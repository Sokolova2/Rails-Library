= render 'navbar/navbar'
.ms-4
  = image_tag @book.image.url
  %p= @book.title
  %p= @book.descriptions
  %p= @book.author
  %p= @book.status
  - if @book.user_id.present?
    %p= @book.user.login

  = render 'books/likes'

  = render 'books/comments'

-if user_signed_in?
  -if @book.status == 'Closed'
    = button_to 'Return book', book_update_status_path(@book), method: :put, class: 'btn btn-dark'
  -else
    = button_to 'Get the book', book_update_status_path(@book), method: :put, class: 'btn btn-dark'

- if @book.ratings.any?
  %p= (@book.ratings.map(&:score).sum.to_f/ @book.ratings.count).round(2)
  %p= "#{@book.ratings.count} vote"

= render 'books/rate'

- if user_signed_in? && current_user.admin
  %p.mt-2
    %a.btn.btn-dark{"aria-controls" => "collapseExample", "aria-expanded" => "false", "data-bs-toggle" => "collapse", :href => "#collapseExample", :role => "button"}
      Edit
  #collapseExample.collapse
    .card.card-body
      = form_with(model: @book, method: :put, local: true) do |f|
        .field
          = f.text_field :title, value: @book.title
          = f.text_field :descriptions, value: @book.descriptions
          = f.text_field :author, value: @book.author
          = image_tag @book.image.url
          = f.file_field :image
        .actions
          = f.submit 'Update book'

  = button_to 'Delete', book_path(@book), method: :delete, class: 'btn btn-dark'